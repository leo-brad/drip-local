class CheckSyncDom {
  constructor(check, callback) {
    this.check = check;
    this.count = 0;
    this.callback = callback;
    this.step = this.step.bind(this);
  }

  start() {
    requestAnimationFrame(this.step);
  }

  step() {
    const { check, callback, } = this;
    if (check() || this.count > 10) {
      callback();
    } else {
      requestAnimationFrame(this.step);
    }
    this.count += 1;
  }
}

export default CheckSyncDom;
